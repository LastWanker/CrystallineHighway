> 项目目前处在构思与构建框架阶段。

# Crystalline Highway（结晶高速公路）

> 一种“寻找驱动建构”的外部记忆系统设想。

## 项目定位

结晶高速公路不是图数据库、向量库或知识图谱。它记录的是“寻找事件”的过程化石：每一次寻找都会留下连接，连接被走过的次数决定是否固化为更高层级的“高速路”。系统的目标不是存下一切，而是让真正发生过的寻找，在未来仍能被再次点亮。最终让 Agent 在低成本上下文中，精准取回应当喂给 LLM 的记忆片段。

## 核心理念

1. **寻找驱动建构**：连接不是预先审批出来的，而是寻找留下的痕迹。
2. **检索不等于记忆**：记忆不是静态文本堆，检索也不应是事后大规模搜索。
3. **事前背诵，事后便利**：用“背诵”积累结构，使检索阶段不再付出高昂代价。
4. **频率–空间物理直觉**：高频元应更局部、碎片化，低频元更稳定、像锚点。

## 关键概念

- **元（memory unit）**：记忆的基本单位，粒度不固定，可为字、词、短语、句子、段落或整段文本。关键在于它是否曾成为“寻找目标”。
- **实例（instance）**：同一元在空间中的不同落点。高频元通常拥有多个实例以去中心化。
- **语义空间/范畴场**：低维粗轴空间，用于提供方向性与弱牵引，而非精确语义推理。
- **连接/路径**：寻找完成后留下的痕迹。
  - **横向路径（sequence path）**：背诵/构筑过程中产生，承载顺序信息，用于固化判定。
  - **纵向路径（index path）**：固化后生成，用于回忆与检索态扩散。
- **固化（crystallize）**：当连续路径通行次数超过阈值时，打包成更高层级的元，并建立纵向索引。
- **层级标签**：用于标记固化层级（如短语/短句/长句/段落/长文），帮助过滤与剪枝。
- **点亮（activation）**：检索/对话时的会话态注意力扩散，用于交汇与排序。
- **TTL（步数限制）**：检索态扩散的主要控制手柄。

## 主要流程

1. **写入/构筑（顺序文本进入系统）**
   - 将输入视为寻找事件序列。
   - 在当前上下文的动态容忍度半径内命中或新建实例。
   - 更新连接与路径次数（固化燃料）。

2. **背诵/重复导入（强化固化）**
   - 同一路径被反复走过。
   - 达到阈值触发固化；旧路保留但计数被抽走迁移到新元强度。

3. **检索/回忆/对话**
   - 查询解析为起点元，沿连接扩散。
   - 使用 TTL 限制步数；交汇处被强激活。
   - 返回的是被激活节点所收敛的文本，而非外部语料位置。

4. **会话态点亮与异步维护**
   - 新对话开始时点亮视为 0。
   - 对话过程中逐步点亮；会话结束后可将内容异步回写继续结晶。

5. **无路处理**
   - 前台不进行全局半径跳跃搜索。
   - 没路视为“背诵不足”，交由后台慢速复习补路。

## 固化规则（根据指导文件的现行设定）

- **连续路径长度**：仅允许二元连续路径触发固化，不允许三元及以上连续路径直接固化。
- **阈值递增**：阈值按固化元数量的 `log2` 向上取整后加一递增（例如路径两头为 2 元时阈值为 2）。
- **固化元数量标签**：固化时单纯相加维护标签，用于后续分层与阈值计算。
- **不应期**：触发固化后，参与固化的节点进入不应期，避免同一次查找中连续触发多次固化。
- **优先长匹配**：每次寻找时优先匹配更长的元（例如 C 与 CD 同时存在时优先 CD）。

## 频率/次数的区分（必须分层）

- **字典频率**：全局统计 + 私人注册后的统计，影响动态容忍度与范畴偏移抑制。
- **路径次数**：连接被走过的次数，用于固化触发与抽走迁移。
- **节点被使用次数**：实例层面的交通量，用于择优规则与“常走优先”。
- **点亮次数**：检索态信号触达次数，用于交汇与候选排序。

## 输出给 LLM 的策略（现行规则）

- 9 条关键短句、6 条关键长句、3 个可能相关段落、1 个相关记忆、2 个可能相关记忆。
- 统一按点亮次数排序（即交汇与触达强度）。

## 现行假设与暂定策略

- **词向量**：使用外部中文词向量（例如腾讯 200 维词向量）作为范畴场基础。
- **hubness**：暂不启用折寿惩罚（留作占位项）。
- **点亮衰减**：暂不启用衰减策略。
- **背台调度**：当前不考虑自动调度，背诵过程可按短语/短句/长句/段落逐级收敛。

## 风险与待解决问题

- 中频概念可能产生多个“幽灵实例”，需要慢速、非强制的再牵引机制。
- 固化元容忍度“乘积规则”可能导致过强，需要引入对数/开方缓解。
- 点亮衰减与跨会话残余热度需要清晰策略。
- 不同层级固化阈值的精细化设定仍需补充。

## 项目结构与实现对齐

README 侧重概念与规则说明；代码结构可参考 `ProgramStructure.md`，实现与实验细节以 `src/` 为准。

---

**系统的本质**

结晶高速公路不是图数据库，不是向量库，不是知识图谱。
它是一个记录“寻找事件”的过程化石网络。
网络结构不是被设计的，而是历史本身的沉积。
目标不是记住一切，而是让真正发生过的寻找，在未来仍有被再次点亮的可能：
不是加载历史，而是回到曾经走过的路。
